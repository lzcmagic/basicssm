webpackJsonp([16],{JEKq:function(t,e,n){var i=n("gsUt");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("449f2266",i,!0,{})},Lp2f:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,'.content[data-v-03726faa]{margin-top:5.55556vw;content:"viewport-units-buggyfill; margin-top: 5.55556vw"}.item[data-v-03726faa]{position:absolute;width:100%;top:0;left:0}.item[data-v-03726faa]:after{content:attr(index);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%)}',""])},Y4F6:function(t,e,n){var i=n("jjua");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("5a9128a2",i,!0,{})},gsUt:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".vue-waterfall{position:relative}",""])},h6iU:function(t,e,n){"use strict";function i(t){!1!==t&&this.autoResize?$(window,"resize",this.reflowHandler,!1):L(window,"resize",this.reflowHandler,!1)}function r(t){var e=t.target,n=e[H];n&&y(e,n)}function a(){clearTimeout(this.token),this.token=setTimeout(this.reflow,this.interval)}function o(){var t=this;if(this.$el){var e=this.$el.clientWidth,n=this.$children.map(function(t){return t.getMeta()});n.sort(function(t,e){return t.order-e.order}),this.virtualRects=n.map(function(){return{}}),s(this,n,this.virtualRects),setTimeout(function(){l(t.$el,e)&&s(t,n,t.virtualRects),t.style.overflow="hidden",f(t.virtualRects,n),t.$emit("reflowed",t)},0)}}function l(t,e){return e!==t.clientWidth}function s(t,e,n){var i=u(t);("h"===t.line?k:E).calculate(t,i,e,n)}function u(t){var e=t.maxLineGap?+t.maxLineGap:t.lineGap;return{align:~["left","right","center"].indexOf(t.align)?t.align:"left",line:~["v","h"].indexOf(t.line)?t.line:"v",lineGap:+t.lineGap,minLineGap:t.minLineGap?+t.minLineGap:t.lineGap,maxLineGap:e,singleMaxWidth:Math.max(t.singleMaxWidth||0,e),fixedHeight:!!t.fixedHeight,grow:t.grow&&t.grow.map(function(t){return+t})}}function c(t,e,n){switch(n){case"right":return t-e;case"center":return(t-e)/2;default:return 0}}function h(t){return t.reduce(function(t,e){return t+e})}function f(t,e){var n=e.filter(function(t){return t.moveClass}),i=d(n);p(t,e);var r=d(n);n.forEach(function(t,e){t.node[H]=t.moveClass,m(t.node,i[e],r[e])}),document.body.clientWidth,n.forEach(function(t){x(t.node,t.moveClass),v(t.node)})}function d(t){return t.map(function(t){return t.vm.rect})}function p(t,e){t.forEach(function(t,n){var i=e[n].node.style;e[n].vm.rect=t;for(var r in t)i[r]=t[r]+"px"})}function m(t,e,n){var i=e.left-n.left,r=e.top-n.top,a=e.width/n.width,o=e.height/n.height;t.style.transform=t.style.WebkitTransform="translate("+i+"px,"+r+"px) scale("+a+","+o+")",t.style.transitionDuration="0s"}function v(t){t.style.transform=t.style.WebkitTransform="",t.style.transitionDuration=""}function g(){return void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend?"webkitTransitionEnd":"transitionend"}function w(t,e){for(var n="function"==typeof t?function(){return t()}:function(){return t},i=[],r=0;r<e;r++)i[r]=n();return i}function x(t,e){if(!G(t,e)){b(t,"class",(b(t,"class").trim()+" "+e).trim())}}function y(t,e){var n=new RegExp("\\s*\\b"+e+"\\b\\s*","g");b(t,"class",b(t,"class").replace(n," ").trim())}function G(t,e){return new RegExp("\\b"+e+"\\b").test(b(t,"class"))}function b(t,e,n){if(void 0===n)return t.getAttribute(e)||"";t.setAttribute(e,n)}function $(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.addEventListener(e,n,i)}function L(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener(e,n,i)}function M(t){n("JEKq")}function W(t){n("Y4F6")}function _(t){n("riBy")}Object.defineProperty(e,"__esModule",{value:!0});var H="_wfMoveClass",R={props:{autoResize:{default:!0},interval:{default:200,validator:function(t){return t>=0}},align:{default:"left",validator:function(t){return~["left","right","center"].indexOf(t)}},line:{default:"v",validator:function(t){return~["v","h"].indexOf(t)}},lineGap:{required:!0,validator:function(t){return t>=0}},minLineGap:{validator:function(t){return t>=0}},maxLineGap:{validator:function(t){return t>=0}},singleMaxWidth:{validator:function(t){return t>=0}},fixedHeight:{default:!1},grow:{validator:function(t){return t instanceof Array}},watch:{default:function(){return{}}}},data:function(){return{style:{height:"",overflow:""},token:null}},methods:{reflowHandler:a,autoResizeHandler:i,reflow:o},created:function(){var t=this;this.virtualRects=[],this.$on("reflow",function(){t.reflowHandler()}),this.$watch(function(){return t.align,t.line,t.lineGap,t.minLineGap,t.maxLineGap,t.singleMaxWidth,t.fixedHeight,t.watch},this.reflowHandler),this.$watch("grow",this.reflowHandler)},mounted:function(){this.$watch("autoResize",this.autoResizeHandler),$(this.$el,g(),r,!0),this.autoResizeHandler(this.autoResize)},beforeDestroy:function(){this.autoResizeHandler(!1),L(this.$el,g(),r,!0)}},E=function(){function t(t,i,r,a){var o=t.$el.clientWidth,l=i.grow,s=l?n(o,l):e(o,i),u=w(0,s.count);r.forEach(function(t,e){var n=u.reduce(function(t,e,n){return e<u[t]?n:t},0),r=s.width[n%s.count],o=a[e];o.top=u[n],o.left=s.left+(n?h(s.width.slice(0,n)):0),o.width=r,o.height=t.height*(i.fixedHeight?1:r/t.width),u[n]=u[n]+o.height}),t.style.height=Math.max.apply(Math,u)+"px"}function e(t,e){var n=t/e.lineGap,i=void 0;if(e.singleMaxWidth>=t)n=1,i=Math.max(t,e.minLineGap);else{var r=e.maxLineGap*~~n,a=e.minLineGap*~~(n+1),o=r>=t,l=a<=t;o&&l?(n=Math.round(n),i=t/n):o?(n=~~n,i=t/n):l?(n=~~(n+1),i=t/n):(n=~~n,i=e.maxLineGap),1===n&&(i=Math.min(t,e.singleMaxWidth),i=Math.max(i,e.minLineGap))}return{width:w(i,n),count:n,left:c(t,i*n,e.align)}}function n(t,e){var n=h(e);return{width:e.map(function(e){return t*e/n}),count:e.length,left:0}}return{calculate:t}}(),k=function(){function t(t,n,i,r){for(var a=t.$el.clientWidth,o=i.length,l=0,s=0;s<o;){for(var u,c,h=e(a,n,i,s),f=0,d=0;f<h.count;f++)u=i[s+f],c=r[s+f],c.top=l,c.left=h.left+d,c.width=u.width*h.height/u.height,c.height=h.height,d+=c.width;s+=h.count,l+=h.height}t.style.height=l+"px"}function e(t,e,a,o){var l=n(t,e.lineGap,a,o),s=Math.max(l-1,1),u=i(t,e,a,o,l),h=i(t,e,a,o,s),f=r(h,u,t),d=f.height,p=f.width;return 1===f.count&&(p=Math.min(e.singleMaxWidth,t),d=a[o].height*p/a[o].width),{left:c(t,p,e.align),count:f.count,height:d}}function n(t,e,n,i){for(var r=0,a=i,o=0;a<n.length&&o<=t;a++)o+=n[a].width*e/n[a].height,r++;return r}function i(t,e,n,i,r){for(var a=0,o=r-1;o>=0;o--){var l=n[i+o];a+=l.width*e.lineGap/l.height}var s=e.lineGap*t/a;if(s<=e.maxLineGap&&s>=e.minLineGap)return{cost:Math.abs(e.lineGap-s),count:r,width:t,height:s};var u=a>t?e.minLineGap:e.maxLineGap;return{cost:1/0,count:r,width:a*u/e.lineGap,height:u}}function r(t,e,n){return t.cost===1/0&&e.cost===1/0?e.width<n?e:t:e.cost>=t.cost?t:e}return{calculate:t}}(),z=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vue-waterfall",style:t.style},[t._t("default")],2)},C=[],j={render:z,staticRenderFns:C},F=j,q=n("VU/8"),T=M,O=q(R,F,!1,T,null,null),S=O.exports,U={data:function(){return{isShow:!1}},props:{width:{required:!0,validator:function(t){return t>=0}},height:{required:!0,validator:function(t){return t>=0}},order:{default:0},moveClass:{default:""}},methods:{notify:function(){this.$parent.$emit("reflow",this)},getMeta:function(){return{vm:this,node:this.$el,order:this.order,width:this.width,height:this.height,moveClass:this.moveClass}}},created:function(){var t=this;this.rect={top:0,left:0,width:0,height:0},this.$watch(function(){return t.width,t.height},this.notify)},mounted:function(){var t=this;this.$parent.$once("reflowed",function(){t.isShow=!0}),this.notify()},destroyed:function(){this.notify()}},B=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"vue-waterfall-slot"},[t._t("default")],2)},Z=[],A={render:B,staticRenderFns:Z},D=A,J=n("VU/8"),P=W,V=J(U,D,!1,P,null,null),K=V.exports,Y=n("1i9Z"),I={queryProductCream:function(t,e,n){Object(Y.a)({url:"/product/query_cream_product_tag_lite/"+t+"/插画/"+e,method:"get"}).then(function(t){return n(t)})}},N=I,Q={methods:{reflowed:function(){this.isBusy=!1},fetch:function(){var t=this;N.queryProductCream(this.$store.getters.userCode,this.page,function(e){e.forEach(function(n){null!==e&&(t.page++,n.width=window.innerWidth/2,n.height=parseFloat(n.imgHeight)/parseFloat(n.imgWidth)*n.width,console.log(n.width+","+n.height),n.url="http://lfmhpro.mylafe.com/"+n.composeId+"_0.png",t.items.push(n))})})}},components:{Waterfall:S,WaterfallSlot:K},data:function(){return{align:"center",items:[],isBusy:!1,page:1,lineGap:window.innerWidth}},created:function(){var t=this;this.$store.commit("setBallShow",!0),this.fetch(),window.addEventListener("scroll",function(){(document.documentElement.scrollTop||document.body.scrollTop)+window.innerHeight>=document.body.clientHeight&&t.fetch()})}},X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"index"}},[n("mt-header",{attrs:{fixed:"",title:"瀑布流"}},[n("router-link",{attrs:{slot:"left",to:"."},slot:"left"},[n("mt-button",{attrs:{icon:"back"},on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")])],1)],1),t._v(" "),n("div",{staticClass:"content"},[n("waterfall",{ref:"waterfall",attrs:{align:t.align,"line-gap":t.lineGap,"min-line-gap":t.lineGap/2,"max-line-gap":t.lineGap/2,"single-max-width":t.lineGap/2,watch:t.items},on:{reflowed:t.reflowed}},t._l(t.items,function(t,e){return n("waterfall-slot",{key:t.index,attrs:{width:t.width,height:t.height,order:e,"move-class":"item-move"}},[n("img",{staticClass:"item",attrs:{src:t.url}})])}))],1)],1)},tt=[],et={render:X,staticRenderFns:tt},nt=et,it=n("VU/8"),rt=_,at=it(Q,nt,!1,rt,"data-v-03726faa",null);e.default=at.exports},jjua:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".vue-waterfall-slot{position:absolute;margin:0;padding:0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}",""])},riBy:function(t,e,n){var i=n("Lp2f");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("690038c0",i,!0,{})}});